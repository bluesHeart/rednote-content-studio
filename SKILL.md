# rednote-content-studio - Markdown è½¬ REDnote å›¾æ–‡å¡ç‰‡æ™ºèƒ½ä½“

å°† Markdown æ–‡æ¡£ï¼ˆå«å›¾ç‰‡å¼•ç”¨ï¼‰æ™ºèƒ½è½¬æ¢ä¸º REDnote å›¾æ–‡å¡ç‰‡æ’ç‰ˆæ ¼å¼ã€‚

## æ ¸å¿ƒç‰¹æ€§

- **å¤šæ¨¡æ€å›¾ç‰‡åˆ†æ**: ä½¿ç”¨ LLM è§†è§‰èƒ½åŠ›åˆ†æå›¾ç‰‡å†…å®¹ã€æƒ…æ„Ÿå’Œå»ºè®®ä½ç½®
- **æ™ºèƒ½å†…å®¹åˆ†å‰²**: LLM å†³å®šæœ€ä½³åˆ†é¡µç­–ç•¥ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§
- **è§†è§‰åé¦ˆå¾ªç¯**: LLM "çœ‹åˆ°"æ’ç‰ˆé¢„è§ˆå›¾å¹¶è¿­ä»£ä¼˜åŒ–ï¼ˆæœ€å¤š3æ¬¡ï¼‰
- **ç©ºè¡Œä¿æŒ**: ä½¿ç”¨ç›²æ–‡ç©ºæ ¼å­—ç¬¦ (U+2800)ï¼Œå°çº¢ä¹¦ä¸ä¼šåæ‰
- **æ™ºèƒ½ emoji**: æ ¹æ®å†…å®¹æƒ…æ„Ÿè‡ªåŠ¨æ’å…¥åˆé€‚çš„ emoji

## å·¥ä½œæµç¨‹

```
è¾“å…¥ Markdown â†’ è§£æ â†’ å›¾ç‰‡åˆ†æ(å¤šæ¨¡æ€) â†’ æ™ºèƒ½åˆ†å‰² â†’ æ ¼å¼åŒ– â†’ è¿­ä»£ä¼˜åŒ–å¾ªç¯ â†’ è¾“å‡º
                                                              â†‘          â†“
                                                              â””â”€â”€ LLMè§†è§‰å®¡æŸ¥ â†â”˜
```

## å®‰è£…

```bash
cd rednote-content-studio
pip install -r requirements.txt
```

ä¾èµ–ï¼š
- openai>=1.0.0
- Pillow>=10.0.0
- rich>=13.0.0
- emoji>=2.0.0

## ç¯å¢ƒå˜é‡

```bash
export SKILL_LLM_API_KEY="your-api-key"
export SKILL_LLM_BASE_URL="https://api.openai.com/v1"  # æˆ–å…¶ä»–å…¼å®¹ç«¯ç‚¹
export SKILL_LLM_MODEL="gpt-4o"  # éœ€è¦æ”¯æŒ vision çš„æ¨¡å‹
```

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œ

```bash
# åŸºæœ¬ä½¿ç”¨
python scripts/main.py input.md

# æŒ‡å®šè¾“å‡ºç›®å½•
python scripts/main.py input.md --output ./my_output

# è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•°
python scripts/main.py input.md --max-iterations 5

# è¯¦ç»†è¾“å‡º
python scripts/main.py input.md -v

# ç¦ç”¨è§†è§‰åé¦ˆï¼ˆæ›´å¿«ä½†è´¨é‡å¯èƒ½è¾ƒä½ï¼‰
python scripts/main.py input.md --no-visual-feedback

# ç›´æ¥æŒ‡å®š API å‚æ•°
python scripts/main.py input.md --api-key "sk-xxx" --model "gpt-4o"
```

### Python API

```python
from scripts.agent import RedNoteAgent
from scripts.config_llm import LLMConfig

# ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®
agent = RedNoteAgent()

# æˆ–æ‰‹åŠ¨é…ç½®
config = LLMConfig.resolve(
    api_key="your-api-key",
    model="gpt-4o"
)
agent = RedNoteAgent(llm_config=config, max_iterations=3)

# æ‰§è¡Œè½¬æ¢
result = agent.convert("article.md", use_visual_feedback=True)

# è®¿é—®ç»“æœ
for page in result.pages:
    print(f"Page {page.page_number}: {page.char_count} chars")
    print(page.content)
```

## è¾“å‡ºæ–‡ä»¶

è½¬æ¢å®Œæˆåï¼Œåœ¨è¾“å‡ºç›®å½•ä¸­ç”Ÿæˆï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `page_N.txt` | ç¬¬ N é¡µçš„çº¯æ–‡æœ¬ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°å°çº¢ä¹¦ |
| `preview_page_N.png` | ç¬¬ N é¡µçš„é¢„è§ˆå›¾ |
| `preview_page_N.html` | ç¬¬ N é¡µçš„ HTML é¢„è§ˆ |
| `preview.html` | åˆå¹¶çš„å¤šé¡µé¢„è§ˆï¼ˆæ¨èåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼‰ |
| `result.json` | å®Œæ•´çš„ç»“æ„åŒ–æ•°æ® |

## æ’ç‰ˆç¤ºä¾‹

è½¬æ¢å‰ (Markdown):
```markdown
# å¦‚ä½•é«˜æ•ˆå­¦ä¹ ç¼–ç¨‹

å­¦ä¹ ç¼–ç¨‹å…¶å®æ²¡é‚£ä¹ˆéš¾ï¼ä»Šå¤©åˆ†äº«æˆ‘çš„3ä¸ªæ ¸å¿ƒæ–¹æ³•ã€‚

## 1. é¡¹ç›®é©±åŠ¨å­¦ä¹ 

ä»å®é™…é¡¹ç›®å…¥æ‰‹ï¼Œè¾¹åšè¾¹å­¦ã€‚

## 2. åšæŒæ¯å¤©ç»ƒä¹ 

æ¯å¤©30åˆ†é’Ÿï¼Œç§¯å°‘æˆå¤šã€‚
```

è½¬æ¢å (å°çº¢ä¹¦æ ¼å¼):
```
ğŸ“ å¦‚ä½•é«˜æ•ˆå­¦ä¹ ç¼–ç¨‹
â €
å­¦ä¹ ç¼–ç¨‹å…¶å®æ²¡é‚£ä¹ˆéš¾ï¼
ä»Šå¤©åˆ†äº«æˆ‘çš„3ä¸ªæ ¸å¿ƒæ–¹æ³• ğŸ‘‡
â €
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â €
1ï¸âƒ£ ã€é¡¹ç›®é©±åŠ¨å­¦ä¹ ã€‘
ä»å®é™…é¡¹ç›®å…¥æ‰‹ï¼Œè¾¹åšè¾¹å­¦ ğŸ’¡
â €
2ï¸âƒ£ ã€åšæŒæ¯å¤©ç»ƒä¹ ã€‘
æ¯å¤©30åˆ†é’Ÿï¼Œç§¯å°‘æˆå¤š ğŸ’ª
â €
æ„Ÿè°¢é˜…è¯» â¤ï¸
```

## å…³é”®æŠ€æœ¯ç‚¹

### ç©ºè¡Œå¤„ç†

å°çº¢ä¹¦ä¼šè‡ªåŠ¨åæ‰æ™®é€šç©ºè¡Œï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ç›²æ–‡ç©ºæ ¼å­—ç¬¦ï¼š

```python
BRAILLE_BLANK = 'â €'  # U+2800

# æ’ç‰ˆç¤ºä¾‹
"""
æ ‡é¢˜æ–‡å­—
â €
æ­£æ–‡ç¬¬ä¸€æ®µ
â €
æ­£æ–‡ç¬¬äºŒæ®µ
"""
```

### è§†è§‰åé¦ˆå¾ªç¯

æ ¸å¿ƒåˆ›æ–°ï¼šè®© LLM åƒäººä¸€æ ·"çœ‹åˆ°"æ’ç‰ˆæ•ˆæœå¹¶è¿­ä»£ä¼˜åŒ–ã€‚

```
FormattedText â†’ æ¸²æŸ“PNG â†’ LLMçœ‹å›¾è¯„åˆ† â†’ è‹¥<7åˆ† â†’ ä¼˜åŒ–æ–‡æœ¬ â†’ å¾ªç¯
```

LLM å®¡æŸ¥å†…å®¹ï¼š
- ç©ºè¡Œæ˜¯å¦æ­£ç¡®æ˜¾ç¤º
- Emoji ä½¿ç”¨æ˜¯å¦æ°å½“
- å¯è¯»æ€§å’Œç¾æ„Ÿ

## é¡¹ç›®ç»“æ„

```
rednote-content-studio/
â”œâ”€â”€ SKILL.md                          # æœ¬æ–‡æ¡£
â”œâ”€â”€ requirements.txt                  # ä¾èµ–
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config_llm.py                 # LLM é…ç½®
â”‚   â”œâ”€â”€ client.py                     # LLM å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ main.py                       # CLI å…¥å£
â”‚   â”œâ”€â”€ agent.py                      # æ™ºèƒ½ä½“åè°ƒå™¨ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ markdown_parser.py        # Markdown è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ image_analyzer.py         # å¤šæ¨¡æ€å›¾ç‰‡åˆ†æ
â”‚   â”‚   â”œâ”€â”€ content_splitter.py       # æ™ºèƒ½å†…å®¹åˆ†å‰²
â”‚   â”‚   â”œâ”€â”€ rednote_formatter.py     # REDnote æ’ç‰ˆæ ¼å¼åŒ–
â”‚   â”‚   â””â”€â”€ preview_renderer.py       # é¢„è§ˆæ¸²æŸ“å™¨
â”‚   â”‚
â”‚   â””â”€â”€ constants/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ rednote_chars.py          # REDnote ç‰¹æ®Šå­—ç¬¦
â”‚       â””â”€â”€ emoji_library.py          # emoji åˆ†ç±»åº“
â”‚
â””â”€â”€ output/                           # é»˜è®¤è¾“å‡ºç›®å½•
```

## å¤šæ¨¡æ€ LLM ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | æ–¹æ³• | JSON Mode |
|------|------|-----------|
| å›¾ç‰‡å†…å®¹åˆ†æ | `chat_with_image` | Yes |
| å†…å®¹åˆ†å‰²è§„åˆ’ | `chat_text` | Yes |
| æ’ç‰ˆæ ¼å¼åŒ– | `chat_text` | Yes |
| **é¢„è§ˆå›¾å®¡æŸ¥** | `chat_with_image` | Yes |
| æ’ç‰ˆä¼˜åŒ– | `chat_text` | Yes |

## å¸¸è§é—®é¢˜

### Q: ç©ºè¡Œè¿˜æ˜¯è¢«åæ‰äº†ï¼Ÿ
A: ç¡®ä¿ä½¿ç”¨çš„æ˜¯ç›²æ–‡ç©ºæ ¼å­—ç¬¦ `â €` (U+2800)ï¼Œè€Œä¸æ˜¯æ™®é€šç©ºæ ¼ã€‚

### Q: è½¬æ¢å¾ˆæ…¢ï¼Ÿ
A: è§†è§‰åé¦ˆå¾ªç¯éœ€è¦å¤šæ¬¡ LLM è°ƒç”¨ã€‚å¯ä»¥ç”¨ `--no-visual-feedback` ç¦ç”¨ã€‚

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ
A: JPG, JPEG, PNG, GIF, WebP

### Q: å¦‚ä½•è°ƒæ•´åˆ†é¡µç­–ç•¥ï¼Ÿ
A: ä¿®æ”¹ `content_splitter.py` ä¸­çš„ `IDEAL_CHARS` å’Œ `MAX_CHARS` å¸¸é‡ã€‚

## License

MIT
